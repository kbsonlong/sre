<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=X-UA-Compatible content="IE=edge, chrome=1"><title>github工作流 - 蜷缩的蜗牛</title><meta name=author content="kbsonlong">
<meta name=author-link content><meta name=description content="
1. Fork in the cloud

Visit https://github.com/kubernetes/kubernetes
Click Fork button (top right) to establish a cloud-based fork.
"><meta name=keywords content='云原生,运维,SRE,DEVOPS'><meta itemprop=name content="github工作流"><meta itemprop=description content="
1. Fork in the cloud

Visit https://github.com/kubernetes/kubernetes
Click Fork button (top right) to establish a cloud-based fork.
"><meta itemprop=datePublished content="2022-12-30T18:26:53+08:00"><meta itemprop=dateModified content="2022-12-30T18:26:53+08:00"><meta itemprop=wordCount content="1271"><meta itemprop=image content="https://kbsonlong.github.io/logo_transparent.png"><meta itemprop=keywords content><meta property="og:title" content="github工作流"><meta property="og:description" content="
1. Fork in the cloud

Visit https://github.com/kubernetes/kubernetes
Click Fork button (top right) to establish a cloud-based fork.
"><meta property="og:type" content="article"><meta property="og:url" content="https://kbsonlong.github.io/sre/posts/f09cdc/"><meta property="og:image" content="https://kbsonlong.github.io/logo_transparent.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-30T18:26:53+08:00"><meta property="article:modified_time" content="2022-12-30T18:26:53+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kbsonlong.github.io/logo_transparent.png"><meta name=twitter:title content="github工作流"><meta name=twitter:description content="
1. Fork in the cloud

Visit https://github.com/kubernetes/kubernetes
Click Fork button (top right) to establish a cloud-based fork.
"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://kbsonlong.github.io/sre/posts/f09cdc/><link rel=prev href=https://kbsonlong.github.io/sre/posts/f41ffb/><link rel=next href=https://kbsonlong.github.io/sre/posts/4842bb/><link rel=stylesheet href=/sre/lib/normalize/normalize.min.css><link rel=stylesheet href=/sre/css/style.min.css><link rel=stylesheet href=/sre/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/sre/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"github工作流","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kbsonlong.github.io\/sre\/posts\/f09cdc\/"},"genre":"posts","wordcount":1271,"url":"https:\/\/kbsonlong.github.io\/sre\/posts\/f09cdc\/","datePublished":"2022-12-30T18:26:53+08:00","dateModified":"2022-12-30T18:26:53+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"kbsonlong"},"description":""}</script></head><body header-desktop=sticky header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper github-corner=right><div class=header-title><a href=/sre/ title=蜷缩的蜗牛><img class="lazyload logo" src=/sre/svg/loading.min.svg data-src=/logo_transparent.png data-srcset="/logo_transparent.png, /logo_transparent.png 1.5x, /logo_transparent.png 2x" data-sizes=auto alt=蜷缩的蜗牛 title=蜷缩的蜗牛><span class=header-title-text>蜷缩的蜗牛</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/sre/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/sre/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/sre/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/sre/friends/ title=友情链接><i class='fa-solid fa-users fa-fw fa-sm'></i> 友链</a></li><li class=menu-item><a class=menu-link href=/sre/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=https://github.com/kbsonlong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=/sre/messages/><i class='fa-solid fa-messages'></i> 留言板</a></li><li class=menu-item><a class=menu-link href=/sre/messages/ title=留言板>留言板</a></li><li class="menu-item delimiter"></li><li class="menu-item language"><span title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down"></i></span><ul class=sub-menu><li class=menu-item>没有更多翻译</li></ul></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/sre/ title=蜷缩的蜗牛><img class="lazyload logo" src=/sre/svg/loading.min.svg data-src=/logo_transparent.png data-srcset="/logo_transparent.png, /logo_transparent.png 1.5x, /logo_transparent.png 2x" data-sizes=auto alt=/logo_transparent.png title=/logo_transparent.png><span class=header-title-text>蜷缩的蜗牛</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/sre/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/sre/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/sre/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/sre/friends/ title=友情链接><i class='fa-solid fa-users fa-fw fa-sm'></i> 友链</a></li><li class=menu-item><a class=menu-link href=/sre/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=https://github.com/kbsonlong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=/sre/messages/><i class='fa-solid fa-messages'></i> 留言板</a></li><li class=menu-item><a class=menu-link href=/sre/messages/ title=留言板>留言板</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li><li class="menu-item language"><span title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down"></i>
</span><select class=language-select onchange="location=this.value"><option disabled>没有更多翻译</option></select></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>github工作流</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img class="lazyload avatar" src=/sre/svg/loading.min.svg data-src="https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp" data-srcset="https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp, https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp 1.5x, https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp 2x" data-sizes=auto alt=kbsonlong title=kbsonlong>&nbsp;kbsonlong</span></span></div><div class=post-meta-line><span title="2022-12-30 18:26:53"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-12-30>2022-12-30</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 1271 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 3 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-fork-in-the-cloud>1. Fork in the cloud</a></li><li><a href=#2-clone-fork-to-local-storage>2. Clone fork to local storage</a></li><li><a href=#3-create-a-working-branch>3. Create a Working Branch</a><ul><li><a href=#building-kubernetes>Building Kubernetes</a></li></ul></li><li><a href=#4-keep-your-branch-in-sync>4. Keep your branch in sync</a></li><li><a href=#5-commit-your-changes>5. Commit Your Changes</a></li><li><a href=#6-push-to-github>6. Push to GitHub</a></li><li><a href=#7-create-a-pull-request>7. Create a Pull Request</a><ul><li><a href=#get-a-code-review>Get a code review</a></li><li><a href=#squash-commits>Squash commits</a></li></ul></li><li><a href=#merging-a-commit>Merging a commit</a></li><li><a href=#reverting-a-commit>Reverting a commit</a></li></ul></nav></div></div><div class=content id=content><p><img class=lazyload src=/sre/svg/loading.min.svg data-src=https://raw.githubusercontent.com/kubernetes/community/master/contributors/guide/git_workflow.png data-srcset="https://raw.githubusercontent.com/kubernetes/community/master/contributors/guide/git_workflow.png, https://raw.githubusercontent.com/kubernetes/community/master/contributors/guide/git_workflow.png 1.5x, https://raw.githubusercontent.com/kubernetes/community/master/contributors/guide/git_workflow.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/kubernetes/community/master/contributors/guide/git_workflow.png title="Git workflow"></p><h2 id=1-fork-in-the-cloud>1. Fork in the cloud</h2><ol><li>Visit <a href=https://github.com/kubernetes/kubernetes target=_blank rel="external nofollow noopener noreferrer">https://github.com/kubernetes/kubernetes</a></li><li>Click <code>Fork</code> button (top right) to establish a cloud-based fork.</li></ol><h2 id=2-clone-fork-to-local-storage>2. Clone fork to local storage</h2><p>Per Go&rsquo;s <a href=https://golang.org/doc/code.html#Workspaces target=_blank rel="external nofollow noopener noreferrer">workspace instructions</a>, place Kubernetes&rsquo; code on your
<code>GOPATH</code> using the following cloning procedure.</p><p>In your shell, define a local working directory as <code>working_dir</code>. If your <code>GOPATH</code> has multiple paths, pick
just one and use it instead of <code>$GOPATH</code>. You must follow exactly this pattern,
neither <code>$GOPATH/src/github.com/${your github profile name}/</code>
nor any other pattern will work.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>export</span> <span class=nv>working_dir</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>go env GOPATH<span class=k>)</span><span class=s2>/src/k8s.io&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>If you already do Go development on github, the <code>k8s.io</code> directory
will be a sibling to your existing <code>github.com</code> directory.</p><p>Set <code>user</code> to match your github profile name:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>export</span> <span class=nv>user</span><span class=o>=</span>&lt;your github profile name&gt;
</span></span></code></pre></td></tr></table></div></div><p>Both <code>$working_dir</code> and <code>$user</code> are mentioned in the figure above.</p><p>Create your clone:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>mkdir -p <span class=nv>$working_dir</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$working_dir</span>
</span></span><span class=line><span class=cl>git clone https://github.com/<span class=nv>$user</span>/kubernetes.git
</span></span><span class=line><span class=cl><span class=c1># or: git clone git@github.com:$user/kubernetes.git</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$working_dir</span>/kubernetes
</span></span><span class=line><span class=cl>git remote add upstream https://github.com/kubernetes/kubernetes.git
</span></span><span class=line><span class=cl><span class=c1># or: git remote add upstream git@github.com:kubernetes/kubernetes.git</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Never push to upstream master</span>
</span></span><span class=line><span class=cl>git remote set-url --push upstream no_push
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Confirm that your remotes make sense:</span>
</span></span><span class=line><span class=cl>git remote -v
</span></span></code></pre></td></tr></table></div></div><h2 id=3-create-a-working-branch>3. Create a Working Branch</h2><p>Get your local master up to date. Note that depending on which repository you are working from,
the default branch may be called &ldquo;main&rdquo; instead of &ldquo;master&rdquo;.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$working_dir</span>/kubernetes
</span></span><span class=line><span class=cl>git fetch upstream
</span></span><span class=line><span class=cl>git checkout master
</span></span><span class=line><span class=cl>git rebase upstream/master
</span></span></code></pre></td></tr></table></div></div><p>Create your new branch.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git checkout -b myfeature
</span></span></code></pre></td></tr></table></div></div><p>You may now edit files on the <code>myfeature</code> branch.</p><h3 id=building-kubernetes>Building Kubernetes</h3><p>This workflow is process-specific. For quick-start build instructions for <a href=https://git.k8s.io/kubernetes target=_blank rel="external nofollow noopener noreferrer">kubernetes/kubernetes</a>, please <a href=/contributors/devel/development.md#building-kubernetes-on-a-local-osshell-environment>see here</a>.</p><h2 id=4-keep-your-branch-in-sync>4. Keep your branch in sync</h2><p>You will need to periodically fetch changes from the <code>upstream</code>
repository to keep your working branch in sync. Note that depending on which repository you are working from,
the default branch may be called &lsquo;main&rsquo; instead of &lsquo;master&rsquo;.</p><p>Make sure your local repository is on your working branch and run the
following commands to keep it in sync:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git fetch upstream
</span></span><span class=line><span class=cl>git rebase upstream/master
</span></span></code></pre></td></tr></table></div></div><p>Please don&rsquo;t use <code>git pull</code> instead of the above <code>fetch</code> and
<code>rebase</code>. Since <code>git pull</code> executes a merge, it creates merge commits. These make the commit history messy
and violate the principle that commits ought to be individually understandable
and useful (see below).</p><p>You might also consider changing your <code>.git/config</code> file via
<code>git config branch.autoSetupRebase always</code> to change the behavior of <code>git pull</code>, or another non-merge option such as <code>git pull --rebase</code>.</p><h2 id=5-commit-your-changes>5. Commit Your Changes</h2><p>You will probably want to regularly commit your changes. It is likely that you will go back and edit,
build, and test multiple times. After a few cycles of this, you might
<a href=https://www.w3schools.com/git/git_amend.asp target=_blank rel="external nofollow noopener noreferrer">amend your previous commit</a>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git commit
</span></span></code></pre></td></tr></table></div></div><h2 id=6-push-to-github>6. Push to GitHub</h2><p>When your changes are ready for review, push your working branch to
your fork on GitHub.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git push -f &lt;your_remote_name&gt; myfeature
</span></span></code></pre></td></tr></table></div></div><h2 id=7-create-a-pull-request>7. Create a Pull Request</h2><ol><li>Visit your fork at <code>https://github.com/&lt;user>/kubernetes</code></li><li>Click the <strong>Compare & Pull Request</strong> button next to your <code>myfeature</code> branch.</li><li>Check out the pull request <a href=/contributors/guide/pull-requests.md>process</a> for more details and
advice.</li></ol><p><em>If you have upstream write access</em>, please refrain from using the GitHub UI for
creating PRs, because GitHub will create the PR branch inside the main
repository rather than inside your fork.</p><h3 id=get-a-code-review>Get a code review</h3><p>Once your pull request has been opened it will be assigned to one or more
reviewers. Those reviewers will do a thorough code review, looking for
correctness, bugs, opportunities for improvement, documentation and comments,
and style.</p><p>Commit changes made in response to review comments to the same branch on your
fork.</p><p>Very small PRs are easy to review. Very large PRs are very difficult to review.</p><h3 id=squash-commits>Squash commits</h3><p>After a review, prepare your PR for merging by squashing your commits.</p><p>All commits left on your branch after a review should represent meaningful milestones or units of work. Use commits to add clarity to the development and review process.</p><p>Before merging a PR, squash the following kinds of commits:</p><ul><li>Fixes/review feedback</li><li>Typos</li><li>Merges and rebases</li><li>Work in progress</li></ul><p>Aim to have every commit in a PR compile and pass tests independently if you can, but it&rsquo;s not a requirement. In particular, <code>merge</code> commits must be removed, as they will not pass tests.</p><p>To squash your commits, perform an <a href=https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History target=_blank rel="external nofollow noopener noreferrer">interactive rebase</a>:</p><ol><li>Check your git branch:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git status
</span></span></code></pre></td></tr></table></div></div><p>The output should be similar to this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>On branch your-contribution
</span></span><span class=line><span class=cl>Your branch is up to date with &#39;origin/your-contribution&#39;.
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>Start an interactive rebase using a specific commit hash, or count backwards from your last commit using <code>HEAD~&lt;n></code>, where <code>&lt;n></code> represents the number of commits to include in the rebase.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git rebase -i HEAD~3
</span></span></code></pre></td></tr></table></div></div><p>The output should be similar to this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>pick 2ebe926 Original commit
</span></span><span class=line><span class=cl>pick 31f33e9 Address feedback
</span></span><span class=line><span class=cl>pick b0315fe Second unit of work
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Rebase 7c34fc9..b0315ff onto 7c34fc9 (3 commands)
</span></span><span class=line><span class=cl>#
</span></span><span class=line><span class=cl># Commands:
</span></span><span class=line><span class=cl># p, pick &lt;commit&gt; = use commit
</span></span><span class=line><span class=cl># r, reword &lt;commit&gt; = use commit, but edit the commit message
</span></span><span class=line><span class=cl># e, edit &lt;commit&gt; = use commit, but stop for amending
</span></span><span class=line><span class=cl># s, squash &lt;commit&gt; = use commit, but meld into previous commit
</span></span><span class=line><span class=cl># f, fixup &lt;commit&gt; = like &#34;squash&#34;, but discard this commit&#39;s log message
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>Use a command line text editor to change the word <code>pick</code> to <code>squash</code> for the commits you want to squash, then save your changes and continue the rebase:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>pick 2ebe926 Original commit
</span></span><span class=line><span class=cl>squash 31f33e9 Address feedback
</span></span><span class=line><span class=cl>pick b0315fe Second unit of work
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></td></tr></table></div></div><p>The output after saving changes should look similar to this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[detached HEAD 61fdded] Second unit of work
</span></span><span class=line><span class=cl> Date: Thu Mar 5 19:01:32 2020 +0100
</span></span><span class=line><span class=cl> 2 files changed, 15 insertions(+), 1 deletion(-)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> ...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Successfully rebased and updated refs/heads/master.
</span></span></code></pre></td></tr></table></div></div><ol start=4><li>Force push your changes to your remote branch:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>git push --force
</span></span></code></pre></td></tr></table></div></div><p>For mass automated fixups such as automated doc formatting, use one or more
commits for the changes to tooling and a final commit to apply the fixup en
masse. This makes reviews easier.</p><h2 id=merging-a-commit>Merging a commit</h2><p>Once you&rsquo;ve received review and approval, your commits are squashed, your PR is ready for merging.</p><p>Merging happens automatically after both a Reviewer and Approver have approved the PR. If you haven&rsquo;t squashed your commits, they may ask you to do so before approving a PR.</p><h2 id=reverting-a-commit>Reverting a commit</h2><p>In case you wish to revert a commit, use the following instructions.</p><p><em>If you have upstream write access</em>, please refrain from using the
<code>Revert</code> button in the GitHub UI for creating the PR, because GitHub
will create the PR branch inside the main repository rather than inside your fork.</p><ul><li><p>Create a branch and sync it with upstream. Note that depending on which repository you are working from, the default branch may be called &lsquo;main&rsquo; instead of &lsquo;master&rsquo;.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># create a branch</span>
</span></span><span class=line><span class=cl>git checkout -b myrevert
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># sync the branch with upstream</span>
</span></span><span class=line><span class=cl>git fetch upstream
</span></span><span class=line><span class=cl>git rebase upstream/master
</span></span></code></pre></td></tr></table></div></div></li><li><p>If the commit you wish to revert is a <em>merge commit</em>, use this command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># SHA is the hash of the merge commit you wish to revert</span>
</span></span><span class=line><span class=cl>git revert -m <span class=m>1</span> &lt;SHA&gt;
</span></span></code></pre></td></tr></table></div></div><p>If it is a <em>single commit</em>, use this command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># SHA is the hash of the single commit you wish to revert</span>
</span></span><span class=line><span class=cl>git revert &lt;SHA&gt;
</span></span></code></pre></td></tr></table></div></div></li><li><p>This will create a new commit reverting the changes. Push this new commit to your remote.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git push &lt;your_remote_name&gt; myrevert
</span></span></code></pre></td></tr></table></div></div></li><li><p>Finally, <a href=#7-create-a-pull-request>create a Pull Request</a> using this branch.</p></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2022-12-30 18:26:53">更新于 2022-12-30</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/sre/posts/f09cdc/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://kbsonlong.github.io/sre/posts/f09cdc/><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流 data-web><i class="fa-brands fa-whatsapp fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流><i data-svg-src=/sre/lib/simple-icons/icons/line.min.svg></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流><i class="fa-brands fa-weibo fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流 data-description><i data-svg-src=/sre/lib/simple-icons/icons/myspace.min.svg></i></a>
<a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流 data-description><i class="fa-brands fa-blogger fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://kbsonlong.github.io/sre/posts/f09cdc/ data-title=github工作流><i class="fa-brands fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/sre/>主页</a></span></section></div><div class=post-nav><a href=/sre/posts/f41ffb/ class=prev rel=prev title=OpenEBS性能测试><i class="fa-solid fa-angle-left fa-fw"></i>OpenEBS性能测试</a>
<a href=/sre/posts/4842bb/ class=next rel=next title=自建k8s部署aws-ebs-csi-driver>自建k8s部署aws-ebs-csi-driver<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=kbsonlong/devops.alongparty.cn data-repo-id=R_kgDOHE7F-Q data-category=Announcements data-category-id=DIC_kwDOHE7F-c4CPP5J data-mapping=title data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=/sre/>kbsonlong</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line ibruce"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw"></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa fa-spinner fa-spin fa-fw"></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin fa-fw"></i></span></span></div><div class="footer-line beian"><span class="icp footer-divider"><a target=_blank href=https://beian.miit.gov.cn/>粤ICP备18122209号</a></span></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><a href=https://github.com/kbsonlong title="在 GitHub 上查看源代码" target=_blank rel="external nofollow noopener noreferrer" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div></div><link rel=stylesheet href=/sre/lib/katex/katex.min.css><link rel=stylesheet href=/sre/lib/katex/copy-tex.min.css><link rel=stylesheet href=/sre/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/sre/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/sre/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script type=text/javascript src=/sre/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/sre/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/sre/lib/katex/katex.min.js defer></script><script type=text/javascript src=/sre/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/sre/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/sre/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/sre/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=/sre/lib/pangu/pangu.min.js defer></script><script type=text/javascript src=/sre/lib/cell-watermark/watermark.min.js defer></script><script type=text/javascript src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{giscus:{darkTheme:"dark",lightTheme:"light"}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,enablePangu:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"WFOR67TML1",algoliaIndex:"along",algoliaSearchKey:"ea1fe535f9a7ae353f3922489c829cc1",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},watermark:{appendto:".wrapper>main",colspacing:30,content:'<img class="fixit-icon" src="/favicon-16x16.png" alt="FixIt logo" /> FixIt 主题',enable:!0,fontfamily:"inherit",fontsize:.85,height:21,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script type=text/javascript src=/sre/js/theme.min.js defer></script><script type=text/javascript src=/sre/js/_custom.min.js defer></script></body></html>