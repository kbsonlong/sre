<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><meta http-equiv=X-UA-Compatible content="IE=edge, chrome=1"><title>Loki配置解析 - 蜷缩的蜗牛</title><meta name=author content="kbsonlong">
<meta name=author-link content><meta name=description content="Loki 可配置内容较多，相对复杂。本文通过分析 Loki 默认配置文件来了解一下。 默认配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33"><meta name=keywords content='loki'><meta itemprop=name content="Loki配置解析"><meta itemprop=description content="Loki 可配置内容较多，相对复杂。本文通过分析 Loki 默认配置文件来了解一下。 默认配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33"><meta itemprop=datePublished content="2023-06-27T17:53:20+08:00"><meta itemprop=dateModified content="2023-06-27T17:53:20+08:00"><meta itemprop=wordCount content="8877"><meta itemprop=image content="https://www.kbsonlong.com/sre/logo_transparent.png"><meta itemprop=keywords content="loki,"><meta property="og:title" content="Loki配置解析"><meta property="og:description" content="Loki 可配置内容较多，相对复杂。本文通过分析 Loki 默认配置文件来了解一下。 默认配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33"><meta property="og:type" content="article"><meta property="og:url" content="https://www.kbsonlong.com/sre/posts/loki-configuration/"><meta property="og:image" content="https://www.kbsonlong.com/sre/logo_transparent.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-27T17:53:20+08:00"><meta property="article:modified_time" content="2023-06-27T17:53:20+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.kbsonlong.com/sre/logo_transparent.png"><meta name=twitter:title content="Loki配置解析"><meta name=twitter:description content="Loki 可配置内容较多，相对复杂。本文通过分析 Loki 默认配置文件来了解一下。 默认配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#252627"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://www.kbsonlong.com/sre/posts/loki-configuration/><link rel=prev href=https://www.kbsonlong.com/sre/posts/who/><link rel=next href=https://www.kbsonlong.com/sre/posts/multi--cluster-service-discovery/><link rel=stylesheet href=/sre/lib/normalize/normalize.min.css><link rel=stylesheet href=/sre/css/style.min.css><link rel=stylesheet href=/sre/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/sre/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Loki配置解析","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.kbsonlong.com\/sre\/posts\/loki-configuration\/"},"genre":"posts","keywords":"loki","wordcount":8877,"url":"https:\/\/www.kbsonlong.com\/sre\/posts\/loki-configuration\/","datePublished":"2023-06-27T17:53:20+08:00","dateModified":"2023-06-27T17:53:20+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"kbsonlong"},"description":""}</script></head><body header-desktop=sticky header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper github-corner=right><div class=header-title><a href=/sre/ title=蜷缩的蜗牛><img class="lazyload logo" src=/sre/svg/loading.min.svg data-src=/sre/logo_transparent.png data-srcset="/sre/logo_transparent.png, /sre/logo_transparent.png 1.5x, /sre/logo_transparent.png 2x" data-sizes=auto alt=蜷缩的蜗牛 title=蜷缩的蜗牛><span class=header-title-text>蜷缩的蜗牛</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/sre/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/sre/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/sre/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/sre/friends/ title=友情链接><i class='fa-solid fa-users fa-fw fa-sm'></i> 友链</a></li><li class=menu-item><a class=menu-link href=/sre/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=https://github.com/kbsonlong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=/sre/messages/><i class='fa-solid fa-messages'></i> 留言板</a></li><li class=menu-item><a class=menu-link href=/sre/messages/ title=留言板>留言板</a></li><li class="menu-item delimiter"></li><li class="menu-item language"><span title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down"></i></span><ul class=sub-menu><li class=menu-item>没有更多翻译</li></ul></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li></ul></nav></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/sre/ title=蜷缩的蜗牛><img class="lazyload logo" src=/sre/svg/loading.min.svg data-src=/sre/logo_transparent.png data-srcset="/sre/logo_transparent.png, /sre/logo_transparent.png 1.5x, /sre/logo_transparent.png 2x" data-sizes=auto alt=/sre/logo_transparent.png title=/sre/logo_transparent.png><span class=header-title-text>蜷缩的蜗牛</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/sre/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/sre/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/sre/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/sre/friends/ title=友情链接><i class='fa-solid fa-users fa-fw fa-sm'></i> 友链</a></li><li class=menu-item><a class=menu-link href=/sre/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=https://github.com/kbsonlong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=/sre/messages/><i class='fa-solid fa-messages'></i> 留言板</a></li><li class=menu-item><a class=menu-link href=/sre/messages/ title=留言板>留言板</a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw"></i></li><li class="menu-item language"><span title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down"></i>
</span><select class=language-select onchange="location=this.value"><option disabled>没有更多翻译</option></select></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Loki配置解析</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img class="lazyload avatar" src=/sre/svg/loading.min.svg data-src="https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp" data-srcset="https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp, https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp 1.5x, https://gravatar.loli.net/avatar/598872715ec08296cf1e1806135cd518?s=32&amp;d=mp 2x" data-sizes=auto alt=kbsonlong title=kbsonlong>&nbsp;kbsonlong</span></span>
<span class=post-category>收录于 <a href=/sre/categories/%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;监控体系</a></span></div><div class=post-meta-line><span title="2023-06-27 17:53:20"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2023-06-27>2023-06-27</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 8877 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 18 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#默认配置>默认配置</a></li><li><a href=#target>target</a></li><li><a href=#auth_enabled>auth_enabled</a></li><li><a href=#common>common</a><ul><li><a href=#aws-s3-对象存储配置aws_storage_config>AWS S3 对象存储配置(aws_storage_config)</a></li><li><a href=#阿里云oss存储配置-alibabacloud_storage_config>阿里云OSS存储配置 (alibabacloud_storage_config)</a></li></ul></li><li><a href=#distributor>distributor</a></li><li><a href=#ingester>ingester</a></li><li><a href=#querier>querier</a></li><li><a href=#ruler>ruler</a></li><li><a href=#schema_confighttpsgrafanacomdocslokilatestoperationsstorageschema><a href=https://grafana.com/docs/loki/latest/operations/storage/schema/>schema_config</a></a><ul><li><a href=#period_config>period_config</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>Loki 可配置内容较多，相对复杂。本文通过分析 <code>Loki</code> 默认配置文件来了解一下。</p><h2 id=默认配置>默认配置</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># A comma-separated list of components to run. The default value &#39;all&#39; runs Loki</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># in single binary mode. The value &#39;read&#39; is an alias to run only read-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># related components such as the querier and query-frontend, but all in the same</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># process. The value &#39;write&#39; is an alias to run only write-path related</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># components such as the distributor and compactor, but all in the same process.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Supported values: all, compactor, distributor, ingester, querier,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># query-scheduler, ingester-querier, query-frontend, index-gateway, ruler,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># table-manager, read, write. A full list of available targets can be printed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># when running Loki with the &#39;-list-targets&#39; command line flag.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -target</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[target</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;all&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enables authentication through the X-Scope-OrgID header, which must be present</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># if true. If false, the OrgID will always be set to &#39;fake&#39;.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -auth.enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[auth_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = true]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The amount of virtual memory in bytes to reserve as ballast in order to</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># optimize garbage collection. Larger ballasts result in fewer garbage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># collection passes, reducing CPU overhead at the cost of heap size. The ballast</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># will not consume physical memory, because it is never read from. It will,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># however, distort metrics, because it is counted as live memory.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -config.ballast-bytes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ballast_bytes</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 0]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configures the server of the launched module(s).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[server</span><span class=p>:</span><span class=w> </span><span class=l>&lt;server&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configures the distributor.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[distributor</span><span class=p>:</span><span class=w> </span><span class=l>&lt;distributor&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configures the querier. Only appropriate when running all modules or just the</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># querier.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[querier</span><span class=p>:</span><span class=w> </span><span class=l>&lt;querier&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The query_scheduler block configures the Loki query scheduler. When configured</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># it separates the tenant query queues from the query-frontend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_scheduler</span><span class=p>:</span><span class=w> </span><span class=l>&lt;query_scheduler&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The frontend block configures the Loki query-frontend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[frontend</span><span class=p>:</span><span class=w> </span><span class=l>&lt;frontend&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The query_range block configures the query splitting and caching in the Loki</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># query-frontend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_range</span><span class=p>:</span><span class=w> </span><span class=l>&lt;query_range&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The ruler block configures the Loki ruler.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ruler</span><span class=p>:</span><span class=w> </span><span class=l>&lt;ruler&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The ingester_client block configures how the distributor will connect to</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># ingesters. Only appropriate when running all components, the distributor, or</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># the querier.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ingester_client</span><span class=p>:</span><span class=w> </span><span class=l>&lt;ingester_client&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The ingester block configures the ingester and how the ingester will register</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># itself to a key value store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ingester</span><span class=p>:</span><span class=w> </span><span class=l>&lt;ingester&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The index_gateway block configures the Loki index gateway server, responsible</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># for serving index queries without the need to constantly interact with the</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># object store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[index_gateway</span><span class=p>:</span><span class=w> </span><span class=l>&lt;index_gateway&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The storage_config block configures one of many possible stores for both the</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># index and chunks. Which configuration to be picked should be defined in</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># schema_config block.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[storage_config</span><span class=p>:</span><span class=w> </span><span class=l>&lt;storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The chunk_store_config block configures how chunks will be cached and how long</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># to wait before saving them to the backing store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[chunk_store_config</span><span class=p>:</span><span class=w> </span><span class=l>&lt;chunk_store_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configures the chunk index schema and where it is stored.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[schema_config</span><span class=p>:</span><span class=w> </span><span class=l>&lt;schema_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The compactor block configures the compactor component, which compacts index</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># shards for performance.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[compactor</span><span class=p>:</span><span class=w> </span><span class=l>&lt;compactor&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The limits_config block configures global and per-tenant limits in Loki.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[limits_config</span><span class=p>:</span><span class=w> </span><span class=l>&lt;limits_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The frontend_worker configures the worker - running within the Loki querier -</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># picking up and executing queries enqueued by the query-frontend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[frontend_worker</span><span class=p>:</span><span class=w> </span><span class=l>&lt;frontend_worker&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The table_manager block configures the table manager for retention.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[table_manager</span><span class=p>:</span><span class=w> </span><span class=l>&lt;table_manager&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configuration for memberlist client. Only applies if the selected kvstore is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># memberlist.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># When a memberlist config with atleast 1 join_members is defined, kvstore of</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># type memberlist is automatically selected for all the components that require</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># a ring unless otherwise specified in the component&#39;s configuration section.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[memberlist</span><span class=p>:</span><span class=w> </span><span class=l>&lt;memberlist&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configuration for &#39;runtime config&#39; module, responsible for reloading runtime</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># configuration file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[runtime_config</span><span class=p>:</span><span class=w> </span><span class=l>&lt;runtime_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configuration for tracing.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[tracing</span><span class=p>:</span><span class=w> </span><span class=l>&lt;tracing&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configuration for usage report.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[analytics</span><span class=p>:</span><span class=w> </span><span class=l>&lt;analytics&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Common configuration to be shared between multiple modules. If a more specific</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># configuration is given in other sections, the related configuration within</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># this section will be ignored.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[common</span><span class=p>:</span><span class=w> </span><span class=l>&lt;common&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How long to wait between SIGTERM and shutdown. After receiving SIGTERM, Loki</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># will report 503 Service Unavailable status via /ready endpoint.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -shutdown-delay</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[shutdown_delay</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=target>target</h2><p>在 <a href=/posts/c7c7b8/#%e5%be%ae%e6%9c%8d%e5%8a%a1%e6%a8%a1%e5%bc%8f>Loki系统架构</a>中提到 <code>Loki</code> 是微服务架构，它所有组件都是可以独立运行。<code>Loki</code> 内部针对这些组件定义一组别名，可以通过这个参</p><p>数指定运行哪些组件,默认值: <code>all</code> 。
可以通过一下指令查看支持的别名以及别名对应的组件。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>loki -list-targets
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>$  /usr/bin/loki -config.file=/etc/loki/config/config.yaml  -list-targets
</span></span><span class=line><span class=cl>all
</span></span><span class=line><span class=cl>  cache-generation-loader
</span></span><span class=line><span class=cl>  compactor
</span></span><span class=line><span class=cl>  distributor
</span></span><span class=line><span class=cl>  ingester
</span></span><span class=line><span class=cl>  ingester-querier
</span></span><span class=line><span class=cl>  querier
</span></span><span class=line><span class=cl>  query-frontend
</span></span><span class=line><span class=cl>  query-scheduler
</span></span><span class=line><span class=cl>  ruler
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>backend
</span></span><span class=line><span class=cl>  compactor
</span></span><span class=line><span class=cl>  index-gateway
</span></span><span class=line><span class=cl>  ingester-querier
</span></span><span class=line><span class=cl>  query-scheduler
</span></span><span class=line><span class=cl>  ruler
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>cache-generation-loader
</span></span><span class=line><span class=cl>compactor
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>distributor
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>index-gateway
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>ingester
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>ingester-querier
</span></span><span class=line><span class=cl>overrides-exporter
</span></span><span class=line><span class=cl>querier
</span></span><span class=line><span class=cl>  cache-generation-loader
</span></span><span class=line><span class=cl>  ingester-querier
</span></span><span class=line><span class=cl>  query-scheduler
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>query-frontend
</span></span><span class=line><span class=cl>  cache-generation-loader
</span></span><span class=line><span class=cl>  query-scheduler
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>query-scheduler
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>read
</span></span><span class=line><span class=cl>  cache-generation-loader
</span></span><span class=line><span class=cl>  compactor
</span></span><span class=line><span class=cl>  index-gateway
</span></span><span class=line><span class=cl>  ingester-querier
</span></span><span class=line><span class=cl>  querier
</span></span><span class=line><span class=cl>  query-frontend
</span></span><span class=line><span class=cl>  query-scheduler
</span></span><span class=line><span class=cl>  ruler
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>ruler
</span></span><span class=line><span class=cl>  ingester-querier
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>table-manager
</span></span><span class=line><span class=cl>  usage-report
</span></span><span class=line><span class=cl>usage-report
</span></span><span class=line><span class=cl>write
</span></span><span class=line><span class=cl>  distributor
</span></span><span class=line><span class=cl>  ingester
</span></span><span class=line><span class=cl>  usage-report
</span></span></code></pre></td></tr></table></div></div><h2 id=auth_enabled>auth_enabled</h2><p>是否开启多租户认证,默认开启。如果开启会增加一个请求头 <code>X-Scope-OrgID</code>, 值为租户信息，如果不开启，<code>X-Scope-OrgID</code> 会设置为 <code>fake</code>。</p><h2 id=common>common</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 定义后，指定前缀将出现在端点路径的前面</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[path_prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 不同 Loki 组件使用的公共存储配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 支持 AWS S3 协议类型的对象存储，比如minio</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The s3_storage_config block configures the connection to Amazon S3 object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># storage backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: common</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[s3</span><span class=p>:</span><span class=w> </span><span class=l>&lt;s3_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The gcs_storage_config block configures the connection to Google Cloud</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Storage object storage backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: common.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c>#Google Cloud Storage 配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[gcs</span><span class=p>:</span><span class=w> </span><span class=l>&lt;gcs_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The azure_storage_config block configures the connection to Azure object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># storage backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: common.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Azure Storage 对象存储配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[azure</span><span class=p>:</span><span class=w> </span><span class=l>&lt;azure_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The alibabacloud_storage_config block configures the connection to Alibaba</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Cloud Storage object storage backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 阿里云 OSS 对象存储配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[alibabacloud</span><span class=p>:</span><span class=w> </span><span class=l>&lt;alibabacloud_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The bos_storage_config block configures the connection to Baidu Object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Storage (BOS) object storage backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: common.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 百度云 OSS 对象存储配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[bos</span><span class=p>:</span><span class=w> </span><span class=l>&lt;bos_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The swift_storage_config block configures the connection to OpenStack Object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Storage (Swift) object storage backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: common.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># OpenStack 对象存储配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[swift</span><span class=p>:</span><span class=w> </span><span class=l>&lt;swift_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># 本地文件系统配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>filesystem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Directory to store chunks in.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.filesystem.chunk-directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[chunks_directory</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Directory to store rules in.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.filesystem.rules-directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[rules_directory</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>hedging</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># If set to a non-zero value a second request will be issued at the provided</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># duration. Default is 0 (disabled)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.hedge-requests-at</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[at</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The maximum of hedge requests allowed.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.hedge-requests-up-to</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[up_to</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The maximum of hedge requests allowed per seconds.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.hedge-max-per-second</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[max_per_second</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 5]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 如果为 true，则 ingester、compactor 和 query_scheduler 的 ring tokens 将保存到 path_prefix 目录中的文件中。如果将其设置为 true 且 path_prefix 前缀为空，Loki 将出错。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[persist_tokens</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 传入到 ingester 组件的数据副本数</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[replication_factor</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 所有 Loki rings 使用的通用 ring 配置。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 如果指定了通用的 ring 环，则其值用于定义任何未定义的 ring 值。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># 例如，当公共部分中定义的 `heartbeat_period`，但是 distributor 的 ring 本身没有配置 `heartbeat_period`，则公共配置生效。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>ring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kvstore</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Backend storage to use for the ring. Supported values are: consul, etcd,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># inmemory, memberlist, multi.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.ring.store</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[store</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;consul&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The prefix for the keys in the store. Should end with a /.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -common.storage.ring.prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;collectors/&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Configuration for a Consul client. Only applies if the selected kvstore is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># consul.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The CLI flags prefix for this block configuration is: common.storage.ring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[consul</span><span class=p>:</span><span class=w> </span><span class=l>&lt;consul&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Configuration for an ETCD v3 client. Only applies if the selected kvstore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># is etcd.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The CLI flags prefix for this block configuration is: common.storage.ring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[etcd</span><span class=p>:</span><span class=w> </span><span class=l>&lt;etcd&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>multi</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Primary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -common.storage.ring.multi.primary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[primary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Secondary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -common.storage.ring.multi.secondary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[secondary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Mirror writes to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -common.storage.ring.multi.mirror-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[mirror_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Timeout for storing value to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -common.storage.ring.multi.mirror-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[mirror_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 2s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Period at which to heartbeat to the ring. 0 = disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.heartbeat-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 15s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The heartbeat timeout after which compactors are considered unhealthy within</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># the ring. 0 = never (timeout disabled).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.heartbeat-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># File path where tokens are stored. If empty, tokens are not stored at</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># shutdown and restored at startup.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.tokens-file-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tokens_file_path</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># True to enable zone-awareness and replicate blocks across different</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># availability zones.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.zone-awareness-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[zone_awareness_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Instance ID to register in the ring.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.instance-id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_id</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&lt;hostname&gt;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Name of network interface to read address from.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.instance-interface-names</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_interface_names</span><span class=p>:</span><span class=w> </span><span class=l>&lt;list of strings&gt; | default = [&lt;private network interfaces&gt;]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Port to advertise in the ring (defaults to server.grpc-listen-port).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.instance-port</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_port</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 0]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># IP address to advertise in the ring.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.instance-addr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_addr</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The availability zone where this instance is running. Required if</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># zone-awareness is enabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -common.storage.ring.instance-availability-zone</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_availability_zone</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[instance_interface_names</span><span class=p>:</span><span class=w> </span><span class=l>&lt;list of strings&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[instance_addr</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># the http address of the compactor in the form http://host:port</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -common.compactor-address</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[compactor_address</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># the grpc address of the compactor in the form host:port</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -common.compactor-grpc-address</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[compactor_grpc_address</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=aws-s3-对象存储配置aws_storage_config>AWS S3 对象存储配置(aws_storage_config)</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>dynamodb</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># DynamoDB endpoint URL with escaped Key and Secret encoded. If only region is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># specified as a host, proper endpoint will be deduced. Use</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># inmemory:///&lt;table-name&gt; to use a mock in-memory implementation.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -dynamodb.url</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[dynamodb_url</span><span class=p>:</span><span class=w> </span><span class=l>&lt;url&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># DynamoDB table management requests per second limit.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -dynamodb.api-limit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[api_limit</span><span class=p>:</span><span class=w> </span><span class=l>&lt;float&gt; | default = 2]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># DynamoDB rate cap to back off when throttled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -dynamodb.throttle-limit</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[throttle_limit</span><span class=p>:</span><span class=w> </span><span class=l>&lt;float&gt; | default = 10]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Use metrics-based autoscaling, via this query URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.url</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[url</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Queue length above which we will scale up capacity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.target-queue-length</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[target_queue_length</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 100000]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Scale up capacity by this multiple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.scale-up-factor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[scale_up_factor</span><span class=p>:</span><span class=w> </span><span class=l>&lt;float&gt; | default = 1.3]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Ignore throttling below this level (rate per second)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.ignore-throttle-below</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[ignore_throttle_below</span><span class=p>:</span><span class=w> </span><span class=l>&lt;float&gt; | default = 1]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># query to fetch ingester queue length</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.queue-length-query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[queue_length_query</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;sum(avg_over_time(cortex_ingester_flush_queue_length{job=\&#34;cortex/ingester\&#34;}[2m]))&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># query to fetch throttle rates per table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.write-throttle-query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[write_throttle_query</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;sum(rate(cortex_dynamo_throttled_total{operation=\&#34;DynamoDB.BatchWriteItem\&#34;}[1m])) by (table) &gt; 0&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># query to fetch write capacity usage per table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.usage-query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[write_usage_query</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;sum(rate(cortex_dynamo_consumed_capacity_total{operation=\&#34;DynamoDB.BatchWriteItem\&#34;}[15m])) by (table) &gt; 0&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># query to fetch read capacity usage per table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.read-usage-query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[read_usage_query</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;sum(rate(cortex_dynamo_consumed_capacity_total{operation=\&#34;DynamoDB.QueryPages\&#34;}[1h])) by (table) &gt; 0&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># query to fetch read errors per table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -metrics.read-error-query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[read_error_query</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;sum(increase(cortex_dynamo_failures_total{operation=\&#34;DynamoDB.QueryPages\&#34;,error=\&#34;ProvisionedThroughputExceededException\&#34;}[1m])) by (table) &gt; 0&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Number of chunks to group together to parallelise fetches (zero to disable)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -dynamodb.chunk-gang-size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[chunk_gang_size</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 10]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Max number of chunk-get operations to start in parallel</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -dynamodb.chunk.get-max-parallelism</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[chunk_get_max_parallelism</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 32]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>backoff_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Minimum backoff time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -dynamodb.min-backoff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[min_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 100ms]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Maximum backoff time</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -dynamodb.max-backoff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[max_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 50s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Maximum number of times to retry an operation</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -dynamodb.max-retries</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[max_retries</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 20]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># KMS key used for encrypting DynamoDB items.  DynamoDB will use an Amazon</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># owned KMS key if not provided.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -dynamodb.kms-key-id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[kms_key_id</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># S3 endpoint URL with escaped Key and Secret encoded. If only region is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># specified as a host, proper endpoint will be deduced. Use</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># inmemory:///&lt;bucket-name&gt; to use a mock in-memory implementation.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.url</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[s3</span><span class=p>:</span><span class=w> </span><span class=l>&lt;url&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Set this to `true` to force the request to use path-style addressing.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.force-path-style</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[s3forcepathstyle</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Comma separated list of bucket names to evenly distribute chunks over.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Overrides any buckets specified in s3.url flag</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.buckets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[bucketnames</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># S3 Endpoint to connect to.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.endpoint</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[endpoint</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># AWS region to use.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.region</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[region</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># AWS Access Key ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.access-key-id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[access_key_id</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># AWS Secret Access Key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.secret-access-key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[secret_access_key</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># AWS Session Token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.session-token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[session_token</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Disable https on s3 connection.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.insecure</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[insecure</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enable AWS Server Side Encryption [Deprecated: Use .sse instead. if</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># s3.sse-encryption is enabled, it assumes .sse.type SSE-S3]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.sse-encryption</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[sse_encryption</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>http_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The maximum amount of time an idle connection will be held open.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.http.idle-conn-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[idle_conn_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m30s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># If non-zero, specifies the amount of time to wait for a server&#39;s response</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># headers after fully writing the request.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.http.response-header-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[response_header_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Set to true to skip verifying the certificate chain and hostname.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.http.insecure-skip-verify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[insecure_skip_verify</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Path to the trusted CA file that signed the SSL certificate of the S3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># endpoint.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.http.ca-file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ca_file</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The signature version to use for authenticating against S3. Supported values</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># are: v4, v2.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.signature-version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[signature_version</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;v4&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The S3 storage class which objects will use. Supported values are: GLACIER,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># DEEP_ARCHIVE, GLACIER_IR, INTELLIGENT_TIERING, ONEZONE_IA, OUTPOSTS,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># REDUCED_REDUNDANCY, STANDARD, STANDARD_IA.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -s3.storage-class</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[storage_class</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;STANDARD&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>sse</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Enable AWS Server Side Encryption. Supported values: SSE-KMS, SSE-S3.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.sse.type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[type</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># KMS Key ID used to encrypt objects in S3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.sse.kms-key-id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[kms_key_id</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># KMS Encryption Context used for object encryption. It expects JSON formatted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># string.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.sse.kms-encryption-context</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[kms_encryption_context</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configures back off when S3 get Object.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>backoff_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Minimum backoff time when s3 get Object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.min-backoff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[min_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 100ms]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Maximum backoff time when s3 get Object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.max-backoff</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[max_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 3s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Maximum number of times to retry when s3 get Object</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -s3.max-retries</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[max_retries</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 5]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=阿里云oss存储配置-alibabacloud_storage_config>阿里云OSS存储配置 (alibabacloud_storage_config)</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Name of OSS bucket.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -common.storage.oss.bucketname</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[bucket</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># oss Endpoint to connect to.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -common.storage.oss.endpoint</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[endpoint</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># alibabacloud Access Key ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -common.storage.oss.access-key-id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[access_key_id</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># alibabacloud Secret Access Key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -common.storage.oss.secret-access-key</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[secret_access_key</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=distributor>distributor</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>ring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kvstore</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Backend storage to use for the ring. Supported values are: consul, etcd,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># inmemory, memberlist, multi.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -distributor.ring.store</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[store</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;consul&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The prefix for the keys in the store. Should end with a /.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -distributor.ring.prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;collectors/&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Configuration for a Consul client. Only applies if the selected kvstore is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># consul.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The CLI flags prefix for this block configuration is: distributor.ring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[consul</span><span class=p>:</span><span class=w> </span><span class=l>&lt;consul&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Configuration for an ETCD v3 client. Only applies if the selected kvstore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># is etcd.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The CLI flags prefix for this block configuration is: distributor.ring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[etcd</span><span class=p>:</span><span class=w> </span><span class=l>&lt;etcd&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>multi</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Primary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -distributor.ring.multi.primary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[primary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Secondary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -distributor.ring.multi.secondary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[secondary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Mirror writes to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -distributor.ring.multi.mirror-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[mirror_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Timeout for storing value to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -distributor.ring.multi.mirror-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[mirror_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 2s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Period at which to heartbeat to the ring. 0 = disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -distributor.ring.heartbeat-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The heartbeat timeout after which distributors are considered unhealthy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># within the ring. 0 = never (timeout disabled).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -distributor.ring.heartbeat-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Name of network interface to read address from.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -distributor.ring.instance-interface-names</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_interface_names</span><span class=p>:</span><span class=w> </span><span class=l>&lt;list of strings&gt; | default = [&lt;private network interfaces&gt;]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>rate_store</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The max number of concurrent requests to make to ingester stream apis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -distributor.rate-store.max-request-parallelism</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[max_request_parallelism</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 200]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The interval on which distributors will update current stream rates from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># ingesters</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -distributor.rate-store.stream-rate-update-interval</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[stream_rate_update_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Timeout for communication between distributors and any given ingester when</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># updating rates</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -distributor.rate-store.ingester-request-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[ingester_request_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 500ms]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=ingester>ingester</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Configures how the lifecycle of the ingester will operate and where it will</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># register for discovery.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>lifecycler</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>kvstore</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Backend storage to use for the ring. Supported values are: consul, etcd,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># inmemory, memberlist, multi.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -ring.store</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[store</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;consul&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># The prefix for the keys in the store. Should end with a /.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -ring.prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;collectors/&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Configuration for a Consul client. Only applies if the selected kvstore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># is consul.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[consul</span><span class=p>:</span><span class=w> </span><span class=l>&lt;consul&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Configuration for an ETCD v3 client. Only applies if the selected</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># kvstore is etcd.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[etcd</span><span class=p>:</span><span class=w> </span><span class=l>&lt;etcd&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>multi</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Primary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># CLI flag: -multi.primary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>[primary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Secondary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># CLI flag: -multi.secondary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>[secondary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Mirror writes to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># CLI flag: -multi.mirror-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>[mirror_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># Timeout for storing value to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c># CLI flag: -multi.mirror-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>[mirror_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 2s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The heartbeat timeout after which ingesters are skipped for reads/writes.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># 0 = never (timeout disabled).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -ring.heartbeat-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[heartbeat_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The number of ingesters to write to and read from.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -distributor.replication-factor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[replication_factor</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 3]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># True to enable the zone-awareness and replicate ingested samples across</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># different availability zones.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -distributor.zone-awareness-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[zone_awareness_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Comma-separated list of zones to exclude from the ring. Instances in</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># excluded zones will be filtered out from the ring.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -distributor.excluded-zones</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[excluded_zones</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Number of tokens for each ingester.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.num-tokens</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[num_tokens</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 128]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Period at which to heartbeat to consul. 0 = disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.heartbeat-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Heartbeat timeout after which instance is assumed to be unhealthy. 0 =</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.heartbeat-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Observe tokens after generating to resolve collisions. Useful when using</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># gossiping ring.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.observe-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[observe_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Period to wait for a claim from another member; will join automatically</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># after this.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.join-after</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[join_after</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Minimum duration to wait after the internal readiness checks have passed but</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># before succeeding the readiness endpoint. This is used to slowdown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># deployment controllers (eg. Kubernetes) after an instance is ready and</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># before they proceed with a rolling update, to give the rest of the cluster</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># instances enough time to receive ring updates.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.min-ready-duration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[min_ready_duration</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 15s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Name of network interface to read address from.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.lifecycler.interface</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[interface_names</span><span class=p>:</span><span class=w> </span><span class=l>&lt;list of strings&gt; | default = [&lt;private network interfaces&gt;]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Duration to sleep for before exiting, to ensure metrics are scraped.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.final-sleep</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[final_sleep</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># File path where tokens are stored. If empty, tokens are not stored at</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># shutdown and restored at startup.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.tokens-file-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tokens_file_path</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The availability zone where this instance is running.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.availability-zone</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[availability_zone</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Unregister from the ring upon clean shutdown. It can be useful to disable</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># for rolling restarts with consistent naming in conjunction with</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># -distributor.extend-writes=false.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.unregister-on-shutdown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[unregister_on_shutdown</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = true]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># When enabled the readiness probe succeeds only after all instances are</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># ACTIVE and healthy in the ring, otherwise only the instance itself is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># checked. This option should be disabled if in your cluster multiple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># instances can be rolled out simultaneously, otherwise rolling updates may be</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># slowed down.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.readiness-check-ring-health</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[readiness_check_ring_health</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = true]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># IP address to advertise in the ring.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.lifecycler.addr</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[address</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># port to advertise in consul (defaults to server.grpc-listen-port).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.lifecycler.port</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[port</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 0]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># ID to register in the ring.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.lifecycler.ID</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[id</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&lt;hostname&gt;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Number of times to try and transfer chunks before falling back to flushing. If</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># set to 0 or negative value, transfers are disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.max-transfer-retries</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[max_transfer_retries</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 0]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How many flushes can happen concurrently from each stream.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.concurrent-flushes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[concurrent_flushes</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 32]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How often should the ingester see if there are any blocks to flush.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.flush-check-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[flush_check_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 30s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The timeout before a flush is cancelled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.flush-op-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[flush_op_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 10m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How long chunks should be retained in-memory after they&#39;ve been flushed.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.chunks-retain-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[chunk_retain_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How long chunks should sit in-memory with no updates before being flushed if</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># they don&#39;t hit the max block size. This means that half-empty chunks will</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># still be flushed after a certain period as long as they receive no further</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># activity.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.chunks-idle-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[chunk_idle_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 30m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The targeted _uncompressed_ size in bytes of a chunk block When this threshold</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># is exceeded the head block will be cut and compressed inside the chunk.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.chunks-block-size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[chunk_block_size</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 262144]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># A target _compressed_ size in bytes for chunks. This is a desired size not an</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># exact size, chunks may be slightly bigger or significantly smaller if they get</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># flushed for other reasons (e.g. chunk_idle_period). A value of 0 creates</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># chunks with a fixed 10 blocks, a non zero value will create chunks with a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># variable number of blocks to meet the target size.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.chunk-target-size</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[chunk_target_size</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 1572864]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The algorithm to use for compressing chunk. (none, gzip, lz4-64k, snappy,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># lz4-256k, lz4-1M, lz4, flate, zstd)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.chunk-encoding</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[chunk_encoding</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;gzip&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The maximum duration of a timeseries chunk in memory. If a timeseries runs for</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># longer than this, the current chunk will be flushed to the store and a new</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># chunk created.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.max-chunk-age</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[max_chunk_age</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 2h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Forget about ingesters having heartbeat timestamps older than</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># `ring.kvstore.heartbeat_timeout`. This is equivalent to clicking on the</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># `/ring` `forget` button in the UI: the ingester is removed from the ring. This</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># is a useful setting when you are sure that an unhealthy node won&#39;t return. An</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># example is when not using stateful sets or the equivalent. Use</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># `memberlist.rejoin_interval` &gt; 0 to handle network partition cases when using</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># a memberlist.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.autoforget-unhealthy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[autoforget_unhealthy</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Parameters used to synchronize ingesters to cut chunks at the same moment.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Sync period is used to roll over incoming entry to a new chunk. If chunk&#39;s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># utilization isn&#39;t high enough (eg. less than 50% when sync_min_utilization is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># set to 0.5), then this chunk rollover doesn&#39;t happen.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.sync-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[sync_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Minimum utilization of chunk when doing synchronization.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.sync-min-utilization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[sync_min_utilization</span><span class=p>:</span><span class=w> </span><span class=l>&lt;float&gt; | default = 0]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The maximum number of errors a stream will report to the user when a push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># fails. 0 to make unlimited.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.max-ignored-stream-errors</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[max_returned_stream_errors</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 10]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How far back should an ingester be allowed to query the store for data, for</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># use only with boltdb-shipper/tsdb index and filesystem object store. -1 for</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># infinite.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.query-store-max-look-back-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_store_max_look_back_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The ingester WAL (Write Ahead Log) records incoming logs and stores them on</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># the local file systems in order to guarantee persistence of acknowledged data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># in the event of a process crash.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>wal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Enable writing of ingested data into WAL.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.wal-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = true]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Directory where the WAL data is stored and/or recovered from.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.wal-dir</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[dir</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;wal&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Interval at which checkpoints should be created.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.checkpoint-duration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[checkpoint_duration</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># When WAL is enabled, should chunks be flushed to long-term storage on</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># shutdown.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.flush-on-shutdown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[flush_on_shutdown</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Maximum memory size the WAL may use during replay. After hitting this, it</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># will flush data to storage before continuing. A unit suffix (KB, MB, GB) may</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># be applied.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ingester.wal-replay-memory-ceiling</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[replay_memory_ceiling</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 4GB]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Shard factor used in the ingesters for the in process reverse index. This MUST</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># be evenly divisible by ALL schema shard factors or Loki will not start.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.index-shards</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[index_shards</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 32]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Maximum number of dropped streams to keep in memory during tailing.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ingester.tailer.max-dropped-streams</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[max_dropped_streams</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 10]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=querier>querier</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Maximum duration for which the live tailing requests are served.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.tail-max-duration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[tail_max_duration</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Time to wait before sending more than the minimum successful query requests.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.extra-query-delay</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[extra_query_delay</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Maximum lookback beyond which queries are not sent to ingester. 0 means all</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># queries are sent to ingester.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.query-ingesters-within</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_ingesters_within</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 3h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>engine</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Deprecated: Use querier.query-timeout instead. Timeout for query execution.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -querier.engine.timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The maximum amount of time to look back for log lines. Used only for instant</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># log queries.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -querier.engine.max-lookback-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[max_look_back_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 30s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The maximum number of concurrent queries allowed.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.max-concurrent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[max_concurrent</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 10]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Only query the store, and not attempt any ingesters. This is useful for</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># running a standalone querier pool operating only against stored data.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.query-store-only</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_store_only</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># When true, queriers only query the ingesters, and not stored data. This is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># useful when the object store is unavailable.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.query-ingester-only</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_ingester_only</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># When true, allow queries to span multiple tenants.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.multi-tenant-queries-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[multi_tenant_queries_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># When true, querier limits sent via a header are enforced.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -querier.per-request-limits-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[per_request_limits_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=ruler>ruler</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span><span class=lnt>252
</span><span class=lnt>253
</span><span class=lnt>254
</span><span class=lnt>255
</span><span class=lnt>256
</span><span class=lnt>257
</span><span class=lnt>258
</span><span class=lnt>259
</span><span class=lnt>260
</span><span class=lnt>261
</span><span class=lnt>262
</span><span class=lnt>263
</span><span class=lnt>264
</span><span class=lnt>265
</span><span class=lnt>266
</span><span class=lnt>267
</span><span class=lnt>268
</span><span class=lnt>269
</span><span class=lnt>270
</span><span class=lnt>271
</span><span class=lnt>272
</span><span class=lnt>273
</span><span class=lnt>274
</span><span class=lnt>275
</span><span class=lnt>276
</span><span class=lnt>277
</span><span class=lnt>278
</span><span class=lnt>279
</span><span class=lnt>280
</span><span class=lnt>281
</span><span class=lnt>282
</span><span class=lnt>283
</span><span class=lnt>284
</span><span class=lnt>285
</span><span class=lnt>286
</span><span class=lnt>287
</span><span class=lnt>288
</span><span class=lnt>289
</span><span class=lnt>290
</span><span class=lnt>291
</span><span class=lnt>292
</span><span class=lnt>293
</span><span class=lnt>294
</span><span class=lnt>295
</span><span class=lnt>296
</span><span class=lnt>297
</span><span class=lnt>298
</span><span class=lnt>299
</span><span class=lnt>300
</span><span class=lnt>301
</span><span class=lnt>302
</span><span class=lnt>303
</span><span class=lnt>304
</span><span class=lnt>305
</span><span class=lnt>306
</span><span class=lnt>307
</span><span class=lnt>308
</span><span class=lnt>309
</span><span class=lnt>310
</span><span class=lnt>311
</span><span class=lnt>312
</span><span class=lnt>313
</span><span class=lnt>314
</span><span class=lnt>315
</span><span class=lnt>316
</span><span class=lnt>317
</span><span class=lnt>318
</span><span class=lnt>319
</span><span class=lnt>320
</span><span class=lnt>321
</span><span class=lnt>322
</span><span class=lnt>323
</span><span class=lnt>324
</span><span class=lnt>325
</span><span class=lnt>326
</span><span class=lnt>327
</span><span class=lnt>328
</span><span class=lnt>329
</span><span class=lnt>330
</span><span class=lnt>331
</span><span class=lnt>332
</span><span class=lnt>333
</span><span class=lnt>334
</span><span class=lnt>335
</span><span class=lnt>336
</span><span class=lnt>337
</span><span class=lnt>338
</span><span class=lnt>339
</span><span class=lnt>340
</span><span class=lnt>341
</span><span class=lnt>342
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># URL of alerts return path.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.external.url</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[external_url</span><span class=p>:</span><span class=w> </span><span class=l>&lt;url&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Labels to add to all alerts.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[external_labels</span><span class=p>:</span><span class=w> </span><span class=l>&lt;list of Labels&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The grpc_client block configures the gRPC client used to communicate between</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># two Loki components.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The CLI flags prefix for this block configuration is: ruler.client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[ruler_client</span><span class=p>:</span><span class=w> </span><span class=l>&lt;grpc_client&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How frequently to evaluate rules.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.evaluation-interval</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[evaluation_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How frequently to poll for rule changes.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.poll-interval</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[poll_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Deprecated: Use -ruler-storage. CLI flags and their respective YAML config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># options instead.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>storage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Method to use for backend rule storage (configdb, azure, gcs, s3, swift,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># local, bos)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.storage.type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[type</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for Azure.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: ruler.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[azure</span><span class=p>:</span><span class=w> </span><span class=l>&lt;azure_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for AlibabaCloud Object Storage (OSS).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: ruler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[alibabacloud</span><span class=p>:</span><span class=w> </span><span class=l>&lt;alibabacloud_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for GCS.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: ruler.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[gcs</span><span class=p>:</span><span class=w> </span><span class=l>&lt;gcs_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for S3.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: ruler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[s3</span><span class=p>:</span><span class=w> </span><span class=l>&lt;s3_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for Baidu Object Storage (BOS).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: ruler.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[bos</span><span class=p>:</span><span class=w> </span><span class=l>&lt;bos_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for Swift.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The CLI flags prefix for this block configuration is: ruler.storage</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[swift</span><span class=p>:</span><span class=w> </span><span class=l>&lt;swift_storage_config&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configures backend rule storage for a local file system directory.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>local</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Directory to scan for rules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -ruler.storage.local.directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[directory</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># File path to store temporary rule files.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.rule-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[rule_path</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;/rules&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Comma-separated list of Alertmanager URLs to send notifications to. Each</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Alertmanager URL is treated as a separate group in the configuration. Multiple</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Alertmanagers in HA per group can be supported by using DNS resolution via</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># &#39;-ruler.alertmanager-discovery&#39;.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.alertmanager-url</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[alertmanager_url</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Use DNS SRV records to discover Alertmanager hosts.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.alertmanager-discovery</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[enable_alertmanager_discovery</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How long to wait between refreshing DNS resolutions of Alertmanager hosts.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.alertmanager-refresh-interval</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[alertmanager_refresh_interval</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># If enabled requests to Alertmanager will utilize the V2 API.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.alertmanager-use-v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[enable_alertmanager_v2</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># List of alert relabel configs.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[alert_relabel_configs</span><span class=p>:</span><span class=w> </span><span class=l>&lt;relabel_config...&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Capacity of the queue for notifications to be sent to the Alertmanager.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.notification-queue-capacity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[notification_queue_capacity</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 10000]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># HTTP timeout duration when sending notifications to the Alertmanager.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.notification-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[notification_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 10s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>alertmanager_client</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Path to the client certificate file, which will be used for authenticating</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># with the server. Also requires the key path to be configured.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-cert-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_cert_path</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Path to the key file for the client certificate. Also requires the client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># certificate to be configured.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-key-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_key_path</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Path to the CA certificates file to validate server certificate against. If</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># not set, the host&#39;s root CA certificates are used.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-ca-path</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_ca_path</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Override the expected name on the server certificate.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-server-name</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_server_name</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Skip validating server certificate.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-insecure-skip-verify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_insecure_skip_verify</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Override the default cipher suite list (separated by commas). Allowed</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># values:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Secure Ciphers:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_AES_128_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_AES_256_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_AES_128_GCM_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_AES_256_GCM_SHA384</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_AES_128_GCM_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_AES_256_GCM_SHA384</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_CHACHA20_POLY1305_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Insecure Ciphers:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_RC4_128_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_3DES_EDE_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_RSA_WITH_AES_128_CBC_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_RC4_128_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_RC4_128_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># - TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-cipher-suites</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_cipher_suites</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Override the default minimum TLS version. Allowed values: VersionTLS10,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># VersionTLS11, VersionTLS12, VersionTLS13</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.tls-min-version</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tls_min_version</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># HTTP Basic authentication username. It overrides the username set in the URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># (if any).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.basic-auth-username</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[basic_auth_username</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># HTTP Basic authentication password. It overrides the password set in the URL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># (if any).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.basic-auth-password</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[basic_auth_password</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># HTTP Header authorization type (default: Bearer).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.type</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[type</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;Bearer&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># HTTP Header authorization credentials.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.credentials</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[credentials</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># HTTP Header authorization credentials file.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.alertmanager-client.credentials-file</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[credentials_file</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Max time to tolerate outage for restoring &#34;for&#34; state of alert.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.for-outage-tolerance</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[for_outage_tolerance</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Minimum duration between alert and restored &#34;for&#34; state. This is maintained</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># only for alerts with configured &#34;for&#34; time greater than the grace period.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.for-grace-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[for_grace_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 10m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Minimum amount of time to wait before resending an alert to Alertmanager.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.resend-delay</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[resend_delay</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Distribute rule evaluation using ring backend.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.enable-sharding</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[enable_sharding</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The sharding strategy to use. Supported values are: default, shuffle-sharding.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.sharding-strategy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[sharding_strategy</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;default&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The sharding algorithm to use for deciding how rules &amp; groups are sharded.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Supported values are: by-group, by-rule.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.sharding-algo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[sharding_algo</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;by-group&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Time to spend searching for a pending ruler when shutting down.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.search-pending-for</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[search_pending_for</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Ring used by Loki ruler. The CLI flags prefix for this block configuration is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># &#39;ruler.ring&#39;.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>ring</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>kvstore</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Backend storage to use for the ring. Supported values are: consul, etcd,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># inmemory, memberlist, multi.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -ruler.ring.store</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[store</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;consul&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The prefix for the keys in the store. Should end with a /.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># CLI flag: -ruler.ring.prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;rulers/&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Configuration for a Consul client. Only applies if the selected kvstore is</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># consul.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The CLI flags prefix for this block configuration is: ruler.ring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[consul</span><span class=p>:</span><span class=w> </span><span class=l>&lt;consul&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Configuration for an ETCD v3 client. Only applies if the selected kvstore</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># is etcd.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># The CLI flags prefix for this block configuration is: ruler.ring</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>[etcd</span><span class=p>:</span><span class=w> </span><span class=l>&lt;etcd&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>multi</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Primary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -ruler.ring.multi.primary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[primary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Secondary backend storage used by multi-client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -ruler.ring.multi.secondary</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[secondary</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Mirror writes to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -ruler.ring.multi.mirror-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[mirror_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># Timeout for storing value to secondary store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># CLI flag: -ruler.ring.multi.mirror-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>[mirror_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 2s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Interval between heartbeats sent to the ring. 0 = disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.ring.heartbeat-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The heartbeat timeout after which ruler ring members are considered</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># unhealthy within the ring. 0 = never (timeout disabled).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.ring.heartbeat-timeout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[heartbeat_timeout</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Name of network interface to read addresses from.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.ring.instance-interface-names</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[instance_interface_names</span><span class=p>:</span><span class=w> </span><span class=l>&lt;list of strings&gt; | default = [&lt;private network interfaces&gt;]]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The number of tokens the lifecycler will generate and put into the ring if</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># it joined without transferring tokens from another lifecycler.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.ring.num-tokens</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[num_tokens</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt; | default = 128]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Period with which to attempt to flush rule groups.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.flush-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[flush_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Enable the ruler API.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.enable-api</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[enable_api</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = true]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Comma separated list of tenants whose rules this ruler can evaluate. If</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># specified, only these tenants will be handled by ruler, otherwise this ruler</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># can process rules from all tenants. Subject to sharding.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.enabled-tenants</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[enabled_tenants</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Comma separated list of tenants whose rules this ruler cannot evaluate. If</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># specified, a ruler that would normally pick the specified tenant(s) for</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># processing will ignore them instead. Subject to sharding.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.disabled-tenants</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[disabled_tenants</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Report the wall time for ruler queries to complete as a per user metric and as</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># an info level log message.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.query-stats-enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[query_stats_enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Disable the rule_group label on exported metrics.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># CLI flag: -ruler.disable-rule-group-label</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[disable_rule_group_label</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>wal</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The directory in which to write tenant WAL files. Each tenant will have its</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># own directory one level below this directory.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.wal.dir</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[dir</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;ruler-wal&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Frequency with which to run the WAL truncation process.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.wal.truncate-frequency</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[truncate_frequency</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 1h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Minimum age that samples must exist in the WAL before being truncated.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.wal.min-age</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[min_age</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 5m]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Maximum age that samples must exist in the WAL before being truncated.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.wal.max-age</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[max_age</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 4h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>wal_cleaner</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># The minimum age of a WAL to consider for cleaning.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.wal-cleaner.min-age</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[min_age</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 12h]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Deprecated: CLI flag -ruler.wal-cleaer.period.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Use -ruler.wal-cleaner.period instead.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># How often to run the WAL cleaner. 0 = disabled.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.wal-cleaner.period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 0s]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Remote-write configuration to send rule samples to a Prometheus remote-write</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># endpoint.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>remote_write</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Deprecated: Use &#39;clients&#39; instead. Configure remote write client.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[client</span><span class=p>:</span><span class=w> </span><span class=l>&lt;RemoteWriteConfig&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Configure remote write clients. A map with remote client id as key.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[clients</span><span class=p>:</span><span class=w> </span><span class=l>&lt;map of string to RemoteWriteConfig&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Enable remote-write functionality.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.remote-write.enabled</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[enabled</span><span class=p>:</span><span class=w> </span><span class=l>&lt;boolean&gt; | default = false]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Minimum period to wait between refreshing remote-write reconfigurations.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># This should be greater than or equivalent to</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># -limits.per-user-override-period.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># CLI flag: -ruler.remote-write.config-refresh-period</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[config_refresh_period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt; | default = 10s]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=schema_confighttpsgrafanacomdocslokilatestoperationsstorageschema><a href=https://grafana.com/docs/loki/latest/operations/storage/schema/ target=_blank rel="external nofollow noopener noreferrer">schema_config</a></h2><p>主要定义的是 Loki 数据存储的策略，可以在指定时间将数据写入到新的存储，从而避免数据迁移问题。</p><p><img class=lazyload src=/sre/svg/loading.min.svg data-src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20230628162214.png data-srcset="https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20230628162214.png, https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20230628162214.png 1.5x, https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20230628162214.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20230628162214.png title=Loki存储架构></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># 用于 chunk 索引 schemas 配置</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=p>[</span><span class=l>&lt;period_config&gt;]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=period_config>period_config</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># The date of the first day that index buckets should be created. Use a date in</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># the past if this is your only period_config, otherwise use a date when you</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># want the schema to switch over. In YYYY-MM-DD format, for example: 2018-04-15.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[from</span><span class=p>:</span><span class=w> </span><span class=l>&lt;daytime&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># store and object_store below affect which &lt;storage_config&gt; key is used.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Which store to use for the index. Either aws, aws-dynamo, gcp, bigtable,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># bigtable-hashed, cassandra, boltdb or boltdb-shipper.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[store</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Which store to use for the chunks. Either aws, azure, gcp, bigtable, gcs,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># cassandra, swift, filesystem or a named_store (refer to named_stores_config).</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># If omitted, defaults to the same value as store.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[object_store</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># The schema version to use, current recommended schema is v11.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[schema</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configures how the index is updated and stored.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>index</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Table prefix for all period tables.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Table period.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># A map to be added to all managed tables.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tags</span><span class=p>:</span><span class=w> </span><span class=l>&lt;map of string to string&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Configured how the chunks are updated and stored.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>chunks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Table prefix for all period tables.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[prefix</span><span class=p>:</span><span class=w> </span><span class=l>&lt;string&gt; | default = &#34;&#34;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Table period.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[period</span><span class=p>:</span><span class=w> </span><span class=l>&lt;duration&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># A map to be added to all managed tables.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>[tags</span><span class=p>:</span><span class=w> </span><span class=l>&lt;map of string to string&gt;]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># How many shards will be created. Only used if schema is v10 or greater.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>[row_shards</span><span class=p>:</span><span class=w> </span><span class=l>&lt;int&gt;]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Loki 对于数据存储的目标是向后兼容，通过修改 Schema 配置允许以增量方式升级到新的存储模式。首先，我们需要在schema_config 中创建一个新的 configs 条目，要记住的是新加的存储模式起始时间必须是将来的某个时间点，这样 Table Manager 就可以在之前创建所需的表，并确保不会查询现有数据。否则在查询时会因丢失旧的日志索引造成无法检索。例如我们要把2023年7月28日之后的 Loki 日志切换到 S3 上，那么按照如下配置后，重启服务。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=w>    </span><span class=nt>schema_config</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>configs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2022-01-11&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>index</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>period</span><span class=p>:</span><span class=w> </span><span class=l>24h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prefix</span><span class=p>:</span><span class=w> </span><span class=l>loki_index_</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>object_store</span><span class=p>:</span><span class=w> </span><span class=l>s3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>schema</span><span class=p>:</span><span class=w> </span><span class=l>v12</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>store</span><span class=p>:</span><span class=w> </span><span class=l>boltdb-shipper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=ld>2023-07-28</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>object_store</span><span class=p>:</span><span class=w> </span><span class=l>s3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>schema</span><span class=p>:</span><span class=w> </span><span class=l>v13</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>index</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prefix</span><span class=p>:</span><span class=w> </span><span class=l>index_</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>period</span><span class=p>:</span><span class=w> </span><span class=l>720h</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>chunks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>prefix</span><span class=p>:</span><span class=w> </span><span class=l>chunks_</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>period</span><span class=p>:</span><span class=w> </span><span class=l>720h</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>上面的配置意思就是对于2023年07月28日之前保存的所有数据，Loki 使用 v12 的 schema，到点之后就采用 v13 的 schema 策略来存储日志。</p><p>Loki2.0版本之后，对于使用boltdb存储索引部分做了较大的重构，采用新的boltdb-shipper模式，可以让Loki的索引存储在S3上，而彻底摆脱Cassandra或者谷歌的BigTable。此后服务的横向扩展将变得更加容易。关于bolt-shipper的更多细节，可以参考：https://grafana.com/docs/loki/latest/operations/storage/boltdb-shipper/</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-06-27 17:53:20">更新于 2023-06-27</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/sre/posts/loki-configuration/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析 data-hashtags=loki><i class="fa-brands fa-twitter fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-hashtag=loki><i class="fa-brands fa-facebook-square fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析 data-web><i class="fa-brands fa-whatsapp fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析><i data-svg-src=/sre/lib/simple-icons/icons/line.min.svg></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析><i class="fa-brands fa-weibo fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析 data-description><i data-svg-src=/sre/lib/simple-icons/icons/myspace.min.svg></i></a>
<a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析 data-description><i class="fa-brands fa-blogger fa-fw"></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://www.kbsonlong.com/sre/posts/loki-configuration/ data-title=Loki配置解析><i class="fa-brands fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw"></i>&nbsp;<a href=/sre/tags/loki/>Loki</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/sre/>主页</a></span></section></div><div class=post-nav><a href=/sre/posts/who/ class=prev rel=prev title=源码剖析：KEDA是如何工作的?><i class="fa-solid fa-angle-left fa-fw"></i>源码剖析：KEDA是如何工作的?</a>
<a href=/sre/posts/multi--cluster-service-discovery/ class=next rel=next title="Karmada 多集群服务发现">Karmada 多集群服务发现<i class="fa-solid fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=kbsonlong/devops.alongparty.cn data-repo-id=R_kgDOHE7F-Q data-category=Announcements data-category-id=DIC_kwDOHE7F-c4CPP5J data-mapping=title data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright"><i class="fa-regular fa-copyright fa-fw"></i>
<span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=/sre/>kbsonlong</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line ibruce"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw"></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa fa-spinner fa-spin fa-fw"></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin fa-fw"></i></span></span></div><div class="footer-line beian"><span class="icp footer-divider"><a target=_blank href=https://beian.miit.gov.cn/>粤ICP备18122209号</a></span></div></div></footer></div><div class=widgets><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fa-solid fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fa-solid fa-comment fa-fw"></i></a></div><a href=https://github.com/kbsonlong title="在 GitHub 上查看源代码" target=_blank rel="external nofollow noopener noreferrer" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div></div><link rel=stylesheet href=/sre/lib/katex/katex.min.css><link rel=stylesheet href=/sre/lib/katex/copy-tex.min.css><link rel=stylesheet href=/sre/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/sre/lib/autocomplete/autocomplete.min.js defer></script><script type=text/javascript src=/sre/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script type=text/javascript src=/sre/lib/lazysizes/lazysizes.min.js async defer></script><script type=text/javascript src=/sre/lib/sharer/sharer.min.js async defer></script><script type=text/javascript src=/sre/lib/katex/katex.min.js defer></script><script type=text/javascript src=/sre/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/sre/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/sre/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/sre/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=/sre/lib/pangu/pangu.min.js defer></script><script type=text/javascript src=/sre/lib/cell-watermark/watermark.min.js defer></script><script type=text/javascript src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{giscus:{darkTheme:"dark",lightTheme:"light"}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,enablePangu:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"WFOR67TML1",algoliaIndex:"along",algoliaSearchKey:"ea1fe535f9a7ae353f3922489c829cc1",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},watermark:{appendto:".wrapper>main",colspacing:30,content:'<img class="fixit-icon" src="/favicon-16x16.png" alt="FixIt logo" /> FixIt 主题',enable:!0,fontfamily:"inherit",fontsize:.85,height:21,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script type=text/javascript src=/sre/js/theme.min.js defer></script><script type=text/javascript src=/sre/js/_custom.min.js defer></script></body></html>